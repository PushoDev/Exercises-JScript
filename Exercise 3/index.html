<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add, Edit, Delete -> J.Script</title>
    <!-- Estilos -->
    <style>
        h1,
        h2 {
            text-align: center;
        }
    
        #formContainer {
            text-align: center;
            margin-bottom: 20px;
        }
    
        label {
            display: block;
            margin-top: 10px;
        }
    
        input,
        textarea {
            width: 300px;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
    
        button {
            margin: 10px;
            padding: 8px 16px;
            background-color: #4CAF50;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    
        button:hover {
            background-color: #45a049;
        }
    
        table {
            border-collapse: collapse;
            margin-bottom: 20px;
            width: 100%;
        }
    
        th,
        td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
    
        th {
            background-color: #4CAF50;
            color: #fff;
        }
    </style>
</head>
<body>
    
    <h1 style="color: #4CAF50;"> Agregar, Editar y Eliminar</h1>

    
    <h2>Compra de Productos...</h2>
    
    <div id="formContainer">
        
            <label for="fecha_compra">
                Fecha de Compra
            </label>
            <input type="date" name="fecha_compra" id="fecha_compra">
            
            <label for="proveedor">
                Proveedor:
            </label>
            <input type="text" id="proveedor" placeholder="Ingresar Proveedor del Producto...">
            
            <label for="almacen_destino">
                Almacén de Destino
            </label>
            <input type="text" id="almacen_destino" placeholder="Almacén Destinatario">
            
            <label for="name_producto"></label>
            Nombre del Producto
            </label>
            <input type="text" id="name_producto" placeholder="Nombre del Producto">
            
            <label for="cantidad_compra">
                Cantidad de Compra
            </label>
            <input type="text" id="cantidad_compra" placeholder="Cantidad de Productas...">
            
            <label for="precio_compra">
                Precio de Compra
            </label>
            <input type="text" id="precio_compra" placeholder="Precio del Producto">
            
            <label for="subtotal_compra"></label>
            Subtotal
            </label>
            <input type="text" id="subtotal_compra" placeholder="Subtotal de la compra">
            
            <br>
            
            <button onclick="addData()">Agregar</button>
        
    </div>
    
    <table id="outputTable">
        <tr>
            <th>Fecha</th>
            <th>Proveedor</th>
            <th>Almacén</th>
            <th>Producto</th>
            <th>Cantidad</th>
            <th>Precio</th>
            <th>Subtotal</th>
            <th>Acciones</th>
        </tr>
    </table>
    
    <script>
        function addData() {
            // Get input values
            let fecha_compra = document.getElementById("fecha_compra").value;
            let proveedor = document.getElementById("proveedor").value;
            let almacen_destino = document.getElementById("almacen_destino").value;
            let name_producto = document.getElementById("name_producto").value;
            let cantidad_compra = document.getElementById("cantidad_compra").value;
            let precio_compra = document.getElementById("precio_compra").value;
            let subtotal_compra = document.getElementById("subtotal_compra").value;

            // Get the table and insert a new row at the end
            let table = document.getElementById("outputTable");
            let newRow = table.insertRow(table.rows.length);

            // Insert data into cells of the new row
            newRow.insertCell(0).innerHTML = fecha_compra;
            newRow.insertCell(1).innerHTML = proveedor;
            newRow.insertCell(2).innerHTML = almacen_destino;
            newRow.insertCell(3).innerHTML= name_producto;
            newRow.insertCell(4).innerHTML = cantidad_compra;
            newRow.insertCell(5).innerHTML = precio_compra;
            newRow.insertCell(6).innerHTML= subtotal_compra;
            newRow.insertCell(7).innerHTML =
                '<button onclick="editData(this)">Editar</button>' +
                '<button onclick="deleteData(this)">Eliminar</button>';

            // Clear input fields
            clearInputs();
        }

        function editData(button) {

            // Get the parent row of the clicked button
            let row = button.parentNode.parentNode;

            // Get the cells within the row
            let proveedorCell = row.cells[1];
            let almacen_destinoCell = row.cells[2];
            let cantidad_compraCell = row.cells[3];
            let precio_compraCell = row.cells[4];

            // Prompt the user to enter updated values
            let proveedor =
                prompt("Actualizar Proveedor",
                    proveedorCell.innerHTML);
            let almacen_destino =
                prompt("Almacén de Destino:",
                    almacen_destinoCell.innerHTML);
            let cantidad_compra =
                prompt("Detalles de la Cantidad de Productos:",
                    cantidad_compraCell.innerHTML
                );
            let precio_compra =
                prompt("Actualizar Precio del Producto:",
                    precio_compraCell.innerHTML
                );

            // Update the cell contents with the new values
            proveedorCell.innerHTML = proveedor;
            almacen_destinoCell.innerHTML = almacen_destino;
            cantidad_compraCell.innerHTML = cantidad_compra;
            precio_compraCell.innerHTML = precio_compra;
        }

        function deleteData(button) {

            // Get the parent row of the clicked button
            let row = button.parentNode.parentNode;

            // Remove the row from the table
            row.parentNode.removeChild(row);
        }

        function clearInputs() {

            // Clear input fields
            document.getElementById("fecha_compra").value = ""; 
            document.getElementById("proveedor").value = "";
            document.getElementById("almacen_destino").value = "";
            document.getElementById("name_producto").value= "";
            document.getElementById("cantidad_compra").value = "";
            document.getElementById("precio_compra").value = "";
            document.getElementById("subtotal_compra").value = "";
        }
    </script>
    
</body>
</html>